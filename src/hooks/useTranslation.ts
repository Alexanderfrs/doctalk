import { useLanguage } from '@/contexts/LanguageContext';

// Create a vocabulary translation map for different languages
const vocabularyTranslations: Record<string, Record<string, string>> = {
  pl: {
    'blood-pressure': 'ciśnienie krwi',
    'pulse': 'puls',
    'temperature': 'temperatura',
    'respiratory-rate': 'częstość oddechów',
    'oxygen-saturation': 'saturacja tlenu',
    'pain': 'ból',
    'pain-scale': 'skala bólu',
    'severe-pain': 'silny ból',
    'dull-pain': 'tępy ból',
    'sharp-pain': 'ostry ból',
    // Examples
    'blood-pressure-example': 'Ciśnienie krwi pacjenta jest dziś podwyższone.',
    'pulse-example': 'Twój puls jest regularny i silny.'
  },
  ro: {
    'blood-pressure': 'tensiune arterială',
    'pulse': 'puls',
    'temperature': 'temperatură',
    'respiratory-rate': 'frecvență respiratorie',
    'oxygen-saturation': 'saturație de oxigen',
    'pain': 'durere',
    'pain-scale': 'scară de durere',
    'severe-pain': 'durere severă',
    'dull-pain': 'durere surdă',
    'sharp-pain': 'durere ascuțită',
    // Examples
    'blood-pressure-example': 'Tensiunea arterială a pacientului este ridicată astăzi.',
    'pulse-example': 'Pulsul dumneavoastră este regulat și puternic.'
  },
  hr: {
    'blood-pressure': 'krvni tlak',
    'pulse': 'puls',
    'temperature': 'temperatura',
    'respiratory-rate': 'učestalost disanja',
    'oxygen-saturation': 'zasićenost kisikom',
    'pain': 'bol',
    'pain-scale': 'ljestvica boli',
    'severe-pain': 'jaka bol',
    'dull-pain': 'tupa bol',
    'sharp-pain': 'oštra bol',
    // Examples
    'blood-pressure-example': 'Krvni tlak pacijenta je danas povišen.',
    'pulse-example': 'Vaš puls je pravilan i jak.'
  },
  tr: {
    'blood-pressure': 'tansiyon',
    'pulse': 'nabız',
    'temperature': 'sıcaklık',
    'respiratory-rate': 'solunum hızı',
    'oxygen-saturation': 'oksijen doygunluğu',
    'pain': 'ağrı',
    'pain-scale': 'ağrı ölçeği',
    'severe-pain': 'şiddetli ağrı',
    'dull-pain': 'künt ağrı',
    'sharp-pain': 'keskin ağrı'
  },
  vi: {
    'blood-pressure': 'huyết áp',
    'pulse': 'mạch',
    'temperature': 'nhiệt độ',
    'respiratory-rate': 'nhịp thở',
    'oxygen-saturation': 'độ bão hòa oxy',
    'pain': 'đau',
    'pain-scale': 'thang đo đau',
    'severe-pain': 'đau dữ dội',
    'dull-pain': 'đau âm ỉ',
    'sharp-pain': 'đau nhói'
  }
};

// UI translations, merged with the existing ones in LanguageContext
const uiTranslations: Record<string, Record<string, string>> = {
  en: {
    'singleVocab': 'vocabulary',
    'multipleVocab': 'vocabularies',
    'found': 'found',
    'noVocabularyFound': 'No vocabulary found with the selected filters.',
    'resetFilters': 'Reset filters',
    'searchVocabulary': 'Search vocabulary...',
    'showTranslation': 'Show Translation',
    'hideTranslation': 'Hide Translation',
    'recording': 'Recording...',
    'repeatAfterMe': 'Repeat after me',
    'pronunciationFeedback': 'Pronunciation Feedback',
    'hint': 'Hint',
    'repeat': 'Repeat',
    'languageHint': 'Language Hint',
    'defaultLanguageHint': 'Pay attention to the correct use of the article and the pronunciation of medical terms.',
    'importantVocabularyInScenario': 'Important vocabulary in this scenario',
    'listenToPronunciation': 'Listen to pronunciation',
    'noVocabularyForScenario': 'No vocabulary available for this scenario.',
    'aboutThisScenario': 'About this scenario',
    'context': 'Context',
    'learningObjectives': 'Learning Objectives',
    'involvedPersons': 'Involved Persons',
    'similarScenarios': 'Similar Scenarios',
    'doctor': 'Doctor',
    'patient': 'Patient',
    'nurse': 'Nurse',
    'colleague': 'Colleague',
    'user': 'You',
    'scenarioNotFound': 'Scenario not found',
    'redirectingToPractice': 'Redirecting to Practice page...',
    'noSpeechDetected': 'No speech detected. Please try again.',
    'excellentPronunciation': 'Excellent pronunciation! Your intonation is very natural.',
    'goodPronunciation': 'Good pronunciation. Pay a little more attention to the umlaut pronunciation.',
    'understandablePronunciation': 'Understandable pronunciation. Continue practicing the \'ch\' and \'r\' sounds.',
    'practiceMorePronunciation': 'Keep practicing! Focus on the pronunciation of German specific sounds.',
    'backToExercises': 'Back to Exercises',
    'vocabulary': 'Vocabulary',
    'practicePronunciation': 'Practice Pronunciation',
    'dialog': 'Dialog',
    // Domain categories
    'patient-care': 'Patient Care',
    'emergency': 'Emergency',
    'documentation': 'Documentation',
    'teamwork': 'Teamwork',
    'elderly-care': 'Elderly Care',
    'disability-care': 'Disability Care',
    // Difficulty levels
    'beginner': 'Beginner (A1-A2)',
    'intermediate': 'Intermediate (B1-B2)',
    'advanced': 'Advanced (C1)',
    // Practice page
    'practice': 'Practice',
    'area': 'Area',
    'allAreas': 'All Areas',
    'patientCare': 'Patient Care',
    'elderlyCare': 'Elderly Care',
    'disabilityCare': 'Disability Care',
    'languageLevel': 'Language Level',
    'allLevels': 'All Levels',
    'exercises': 'Exercises',
    'exercise': 'exercise',
    'noExercisesFound': 'No exercises found with selected filters.',
    'searchExercises': 'Search exercises...',
    'showFilters': 'Show Filters',
    'hideFilters': 'Hide Filters',
    'viewVocabulary': 'View Vocabulary',
    'practiceDescription': 'Practice medical German in realistic scenarios from your professional activities',
    
    // Dashboard translations
    'welcome': 'Welcome back',
    'youHaveStreak': 'You have a learning streak of',
    'days': 'days',
    'keepItUp': 'Keep it up',
    'continueLearn': 'Continue learning',
    'progress': 'Your Progress',
    'scenarios': 'Scenarios',
    'completed': 'completed',
    'mastered': 'mastered',
    'weeklyExercises': 'Exercises this week',
    'recentActivities': 'Recent Activities',
    'scenarioCompleted': 'Scenario completed',
    'patientAdmission': 'Patient Admission - Emergency',
    'vocabularyMastered': '{{count}} vocabulary words mastered',
    'categoryEmergency': 'Category: Emergency Medicine',
    'dailyGoalReached': 'New daily goal reached',
    'daysInARow': 'Learned {{count}} days in a row',
    'hoursAgo': '{{count}} hours ago',
    'yesterday': 'Yesterday',
    'daysAgo': '{{count}} days ago',
    'yourStats': 'Your Statistics',
    'totalLearningTime': 'Total learning time',
    'correctAnswers': 'Correct answers',
    'exercisesCompleted': 'Exercises completed',
    'vocabularyCards': 'Vocabulary cards',
    'languageLevelProgress': 'Language level progress',
    
    // Scenario tab and sidebar translations
    'conversation': 'Conversation',
    'resources': 'Resources',
    'notes': 'Notes',
    'objectives': 'Objectives',
    'noObjectives': 'No objectives defined',
    'status': 'Status',
    'notStarted': 'Not Started',
    'inProgress': 'In Progress',
    'startScenario': 'Start Scenario',
    'restartScenario': 'Restart Scenario',
    'scenarioStarted': 'Scenario started',
    'scenarioRestarted': 'Scenario restarted',
    'helpResources': 'Help Resources',
    'howToUse': 'How to Use',
    'navigationTips': 'Here are some tips to help you navigate the scenario:',
    'readScenario': 'Read through the scenario carefully',
    'practiceSkills': 'Practice your medical German communication skills',
    'useResources': 'Use the resources and notes to help you',
  },
  de: {
    'singleVocab': 'Vokabel',
    'multipleVocab': 'Vokabeln',
    'found': 'gefunden',
    'noVocabularyFound': 'Kein Vokabular mit den ausgewählten Filtern gefunden.',
    'resetFilters': 'Filter zurücksetzen',
    'searchVocabulary': 'Vokabular suchen...',
    'showTranslation': 'Übersetzung anzeigen',
    'hideTranslation': 'Übersetzung ausblenden',
    'recording': 'Aufnahme...',
    'repeatAfterMe': 'Sprich mir nach',
    'pronunciationFeedback': 'Aussprache-Feedback',
    'hint': 'Hinweis',
    'repeat': 'Wiederholen',
    'languageHint': 'Sprachlicher Hinweis',
    'defaultLanguageHint': 'Achte auf den korrekten Artikelgebrauch und die Aussprache medizinischer Fachbegriffe.',
    'importantVocabularyInScenario': 'Wichtiges Vokabular in diesem Szenario',
    'listenToPronunciation': 'Aussprache anhören',
    'noVocabularyForScenario': 'Kein Vokabular für dieses Szenario verfügbar.',
    'aboutThisScenario': 'Über dieses Szenario',
    'context': 'Kontext',
    'learningObjectives': 'Lernziele',
    'involvedPersons': 'Beteiligte Personen',
    'similarScenarios': 'Ähnliche Szenarien',
    'doctor': 'Arzt',
    'patient': 'Patient',
    'nurse': 'Krankenschwester',
    'colleague': 'Kollege',
    'user': 'Du',
    'scenarioNotFound': 'Szenario nicht gefunden',
    'redirectingToPractice': 'Weiterleitung zur Übungsseite...',
    'noSpeechDetected': 'Keine Sprache erkannt. Bitte versuche es erneut.',
    'excellentPronunciation': 'Ausgezeichnete Aussprache! Deine Intonation ist sehr natürlich.',
    'goodPronunciation': 'Gute Aussprache. Achte etwas mehr auf die Umlaut-Aussprache.',
    'understandablePronunciation': 'Verständliche Aussprache. Übe weiter die \'ch\'- und \'r\'-Laute.',
    'practiceMorePronunciation': 'Übe weiter! Konzentriere dich auf die Aussprache spezifisch deutscher Laute.',
    'backToExercises': 'Zurück zu den Übungen',
    'vocabulary': 'Vokabular',
    'practicePronunciation': 'Aussprache üben',
    'dialog': 'Dialog',
    // Domain categories
    'patient-care': 'Patientenversorgung',
    'emergency': 'Notfall',
    'documentation': 'Dokumentation',
    'teamwork': 'Teamarbeit',
    'elderly-care': 'Altenpflege',
    'disability-care': 'Behindertenbetreuung',
    // Difficulty levels
    'beginner': 'Anfänger (A1-A2)',
    'intermediate': 'Mittelstufe (B1-B2)',
    'advanced': 'Fortgeschritten (C1)',
    // Practice page
    'practice': 'Übungen',
    'area': 'Bereich',
    'allAreas': 'Alle Bereiche',
    'patientCare': 'Patientenversorgung',
    'elderlyCare': 'Altenpflege',
    'disabilityCare': 'Behindertenbetreuung',
    'languageLevel': 'Sprachniveau',
    'allLevels': 'Alle Niveaus',
    'exercises': 'Übungen',
    'exercise': 'Übung',
    'noExercisesFound': 'Keine Übungen mit den ausgewählten Filtern gefunden.',
    'searchExercises': 'Übungen suchen...',
    'showFilters': 'Filter anzeigen',
    'hideFilters': 'Filter ausblenden',
    'viewVocabulary': 'Vokabular anzeigen',
    'practiceDescription': 'Üben Sie medizinisches Deutsch in realistischen Szenarien aus Ihrem Berufsalltag',
    
    // Dashboard translations
    'welcome': 'Willkommen zurück',
    'youHaveStreak': 'Du hast eine Lernserie von',
    'days': 'Tagen',
    'keepItUp': 'Weiter so',
    'continueLearn': 'Mit dem Lernen fortfahren',
    'progress': 'Dein Fortschritt',
    'scenarios': 'Szenarien',
    'completed': 'abgeschlossen',
    'mastered': 'gemeistert',
    'weeklyExercises': 'Übungen diese Woche',
    'recentActivities': 'Letzte Aktivitäten',
    'scenarioCompleted': 'Szenario abgeschlossen',
    'patientAdmission': 'Patientenaufnahme - Notfall',
    'vocabularyMastered': '5 Vokabeln gemeistert',
    'categoryEmergency': 'Kategorie: Notfallmedizin',
    'dailyGoalReached': 'Neues Tagesziel erreicht',
    'daysInARow': '3 Tage in Folge gelernt',
    'hoursAgo': 'Vor 2 Stunden',
    'yesterday': 'Gestern',
    'daysAgo': 'Vor 2 Tagen',
    'yourStats': 'Deine Statistiken',
    'totalLearningTime': 'Gesamtlernzeit',
    'correctAnswers': 'Korrekte Antworten',
    'exercisesCompleted': 'Übungen absolviert',
    'vocabularyCards': 'Vokabelkarten',
    'languageLevelProgress': 'Sprachniveau Fortschritt',
    
    // Scenario tab and sidebar translations
    'conversation': 'Gespräch',
    'resources': 'Ressourcen',
    'notes': 'Notizen',
    'objectives': 'Ziele',
    'noObjectives': 'Keine Ziele definiert',
    'status': 'Status',
    'notStarted': 'Nicht begonnen',
    'inProgress': 'In Bearbeitung',
    'startScenario': 'Szenario starten',
    'restartScenario': 'Szenario neu starten',
    'scenarioStarted': 'Szenario gestartet',
    'scenarioRestarted': 'Szenario neu gestartet',
    'helpResources': 'Hilfsmittel',
    'howToUse': 'Wie man es benutzt',
    'navigationTips': 'Hier sind einige Tipps zur Navigation im Szenario:',
    'readScenario': 'Lesen Sie das Szenario sorgfältig durch',
    'practiceSkills': 'Üben Sie Ihre medizinischen Deutschkenntnisse',
    'useResources': 'Nutzen Sie die Ressourcen und Notizen zur Unterstützung',
  },
  ro: {
    'singleVocab': 'vocabular',
    'multipleVocab': 'vocabulare',
    'found': 'găsite',
    'noVocabularyFound': 'Nu s-a găsit niciun vocabular cu filtrele selectate.',
    'resetFilters': 'Resetează filtrele',
    'searchVocabulary': 'Caută vocabular...',
    'showTranslation': 'Arată traducerea',
    'hideTranslation': 'Ascunde traducerea',
    'recording': 'Înregistrare...',
    'repeatAfterMe': 'Repetă după mine',
    'pronunciationFeedback': 'Feedback pronunție',
    'hint': 'Indiciu',
    'repeat': 'Repetă',
    'languageHint': 'Indiciu lingvistic',
    'defaultLanguageHint': 'Acordă atenție folosirii corecte a articolului și pronunției termenilor medicali.',
    'importantVocabularyInScenario': 'Vocabular important în acest scenariu',
    'listenToPronunciation': 'Ascultă pronunția',
    'noVocabularyForScenario': 'Niciun vocabular disponibil pentru acest scenariu.',
    'aboutThisScenario': 'Despre acest scenariu',
    'context': 'Context',
    'learningObjectives': 'Obiective de învățare',
    'involvedPersons': 'Persoane implicate',
    'similarScenarios': 'Scenarii similare',
    'doctor': 'Medic',
    'patient': 'Pacient',
    'nurse': 'Asistent medical',
    'colleague': 'Coleg',
    'user': 'Tu',
    'practice': 'Exerciții',
    'practiceDescription': 'Exersează germana medicală în scenarii realiste din activitatea ta profesională',
    
    // Dashboard translations
    'welcome': 'Bun venit înapoi',
    'youHaveStreak': 'Ai o serie de învățare de',
    'days': 'zile',
    'keepItUp': 'Continuă așa',
    'continueLearn': 'Continuă învățarea',
    'progress': 'Progresul tău',
    'scenarios': 'Scenarii',
    'completed': 'finalizate',
    'mastered': 'stăpânite',
    'weeklyExercises': 'Exerciții săptămâna aceasta',
    'recentActivities': 'Activități recente',
    'scenarioCompleted': 'Scenariu finalizat',
    'patientAdmission': 'Admiterea pacientului - Urgență',
    'vocabularyMastered': '5 cuvinte stăpânite',
    'categoryEmergency': 'Categorie: Medicină de urgență',
    'dailyGoalReached': 'Nou obiectiv zilnic atins',
    'daysInARow': '3 zile consecutive de învățare',
    'hoursAgo': 'Acum 2 ore',
    'yesterday': 'Ieri',
    'daysAgo': 'Acum 2 zile',
    'yourStats': 'Statisticile tale',
    'totalLearningTime': 'Timp total de învățare',
    'correctAnswers': 'Răspunsuri corecte',
    'exercisesCompleted': 'Exerciții finalizate',
    'vocabularyCards': 'Carduri de vocabular',
    'languageLevelProgress': 'Progresul nivelului lingvistic',
    
    // Scenario tab and sidebar translations
    'conversation': 'Conversație',
    'resources': 'Resurse',
    'notes': 'Note',
    'objectives': 'Obiective',
    'noObjectives': 'Niciun obiectiv definit',
    'status': 'Status',
    'notStarted': 'Neînceput',
    'inProgress': 'În desfășurare',
    'startScenario': 'Începe scenariul',
    'restartScenario': 'Repornește scenariul',
    'scenarioStarted': 'Scenariu început',
    'scenarioRestarted': 'Scenariu repornit',
    'helpResources': 'Materiale de ajutor',
    'howToUse': 'Cum să folosești',
    'navigationTips': 'Iată câteva sfaturi pentru a naviga în scenariu:',
    'readScenario': 'Citește cu atenție scenariul',
    'practiceSkills': 'Exersează abilitățile de comunicare în germana medicală',
    'useResources': 'Folosește resursele și notițele pentru a te ajuta',
  },
  pl: {
    'singleVocab': 'słownictwo',
    'multipleVocab': 'słownictwa',
    'found': 'znalezione',
    'noVocabularyFound': 'Nie znaleziono słownictwa z wybranymi filtrami.',
    'resetFilters': 'Resetuj filtry',
    'searchVocabulary': 'Szukaj słownictwa...',
    'practice': 'Ćwiczenia',
    'practiceDescription': 'Ćwicz niemiecki medyczny w realistycznych scenariuszach z twojej działalności zawodowej',
    
    // Dashboard translations
    'welcome': 'Witaj ponownie',
    'youHaveStreak': 'Masz serię nauki przez',
    'days': 'dni',
    'keepItUp': 'Tak trzymaj',
    'continueLearn': 'Kontynuuj naukę',
    'progress': 'Twój postęp',
    'scenarios': 'Scenariusze',
    'completed': 'ukończone',
    'mastered': 'opanowane',
    'weeklyExercises': 'Ćwiczenia w tym tygodniu',
    'recentActivities': 'Ostatnie aktywności',
    'scenarioCompleted': 'Ukończono scenariusz',
    'patientAdmission': 'Przyjęcie pacjenta - Nagły wypadek',
    'vocabularyMastered': 'Opanowano 5 słów',
    'categoryEmergency': 'Kategoria: Medycyna ratunkowa',
    'dailyGoalReached': 'Osiągnięto nowy dzienny cel',
    'daysInARow': 'Nauka przez 3 dni z rzędu',
    'hoursAgo': '2 godziny temu',
    'yesterday': 'Wczoraj',
    'daysAgo': '2 dni temu',
    'yourStats': 'Twoje statystyki',
    'totalLearningTime': 'Gesamtw czas nauki',
    'correctAnswers': 'Poprawne odpowiedzi',
    'exercisesCompleted': 'Ukończone ćwiczenia',
    'vocabularyCards': 'Karty słownictwa',
    'languageLevelProgress': 'Postęp poziomu językowego',
    
    // Scenario tab and sidebar translations
    'conversation': 'Rozmowa',
    'resources': 'Zasoby',
    'notes': 'Notatki',
    'objectives': 'Cele',
    'noObjectives': 'Brak zdefiniowanych celów',
    'status': 'Status',
    'notStarted': 'Nie rozpoczęto',
    'inProgress': 'W trakcie',
    'startScenario': 'Rozpocznij scenariusz',
    'restartScenario': 'Uruchom scenariusz ponownie',
    'scenarioStarted': 'Scenariusz rozpoczęty',
    'scenarioRestarted': 'Scenariusz uruchomiony ponownie',
    'helpResources': 'Materiały pomocnicze',
    'howToUse': 'Jak korzystać',
    'navigationTips': 'Oto kilka wskazówek dotyczących nawigacji w scenariuszu:',
    'readScenario': 'Przeczytaj uważnie scenariusz',
    'practiceSkills': 'Ćwicz swoje umiejętności komunikacji w niemieckim medycznym',
    'useResources': 'Korzystaj z zasobów i notatek, aby ci pomóc',
  },
  hr: {
    'singleVocab': 'rječnik',
    'multipleVocab': 'rječnici',
    'found': 'pronađeno',
    'noVocabularyFound': 'Nije pronađen rječnik s odabranim filtrima.',
    'resetFilters': 'Poništi filtre',
    'searchVocabulary': 'Pretraži rječnik...',
    'practice': 'Vježbe',
    'practiceDescription': 'Vježbajte medicinski njemački u realističnim scenarijima iz vaše profesionalne aktivnosti',
    
    // Dashboard translations
    'welcome': 'Dobrodošli natrag',
    'youHaveStreak': 'Imate niz učenja od',
    'days': 'dana',
    'keepItUp': 'Tako nastavite',
    'continueLearn': 'Nastavite s učenjem',
    'progress': 'Vaš napredak',
    'scenarios': 'Scenariji',
    'completed': 'završeno',
    'mastered': 'savladano',
    'weeklyExercises': 'Vježbe ovaj tjedan',
    'recentActivities': 'Nedavne aktivnosti',
    'scenarioCompleted': 'Završen scenarij',
    'patientAdmission': 'Prijem pacijenta - Hitni slučaj',
    'vocabularyMastered': 'Savladano 5 riječi',
    'categoryEmergency': 'Kategorija: Hitna medicina',
    'dailyGoalReached': 'Postignut novi dnevni cilj',
    'daysInARow': 'Učenje 3 dana zaredom',
    'hoursAgo': 'Prije 2 sata',
    'yesterday': 'Jučer',
    'daysAgo': 'Prije 2 dana',
    'yourStats': 'Vaše statistike',
    'totalLearningTime': 'Ukupno vrijeme učenja',
    'correctAnswers': 'Točni odgovori',
    'exercisesCompleted': 'Završene vježbe',
    'vocabularyCards': 'Kartice s riječima',
    'languageLevelProgress': 'Napredak jezične razine',
    
    // Scenario tab and sidebar translations
    'conversation': 'Razgovor',
    'resources': 'Resursi',
    'notes': 'Bilješke',
    'objectives': 'Ciljevi',
    'noObjectives': 'Nema definiranih ciljeva',
    'status': 'Status',
    'notStarted': 'Nije započeto',
    'inProgress': 'U tijeku',
    'startScenario': 'Započni scenarij',
    'restartScenario': 'Ponovno pokreni scenarij',
    'scenarioStarted': 'Scenarij započet',
    'scenarioRestarted': 'Scenarij ponovno pokrenut',
    'helpResources': 'Pomoćni resursi',
    'howToUse': 'Kako koristiti',
    'navigationTips': 'Evo nekoliko savjeta za navigaciju kroz scenarij:',
    'readScenario': 'Pažljivo pročitajte scenarij',
    'practiceSkills': 'Vježbajte svoje komunikacijske vještine na medicinskom njemačkom',
    'useResources': 'Koristite resurse i bilješke kao pomoć',
  },
  // Add similar translations for other languages as needed
};

// Add translations for other languages
['tr', 'sr', 'bs', 'tl', 'hi', 'ar', 'vi'].forEach(lang => {
  uiTranslations[lang] = {
    ...uiTranslations.en, // Fallback to English
    // Add specific overrides for each language as needed
  };
});

export const useTranslation = () => {
  const { translate, getGermanContent, userLanguage } = useLanguage();

  // Enhanced translate function that checks first in our local UI translations
  const t = (key: string, params?: { count?: number }): string => {
    if (!key) return '';
    
    // Check if we have this key in our local UI translations
    if (uiTranslations[userLanguage]?.[key]) {
      let translation = uiTranslations[userLanguage][key];
      
      // Handle pluralization or variable replacement
      if (params?.count !== undefined) {
        translation = translation.replace('{{count}}', String(params.count));
      }
      
      return translation;
    }
    
    // If not, fall back to the context's translate function
    return translate(key);
  };

  const getLocalizedContent = (key: string, germanContent?: string) => {
    // For vocabulary translations
    if (vocabularyTranslations[userLanguage]?.[key]) {
      if (germanContent) {
        return {
          translation: vocabularyTranslations[userLanguage][key],
          germanVersion: getGermanContent(germanContent)
        };
      }
      return vocabularyTranslations[userLanguage][key];
    }
    
    // If no direct vocabulary translation exists
    const translatedText = translate(key);
    if (germanContent) {
      return {
        translation: translatedText,
        germanVersion: getGermanContent(germanContent)
      };
    }
    return translatedText;
  };

  return {
    t,
    getLocalizedContent
  };
};
